@let formGroupStudent = form.controls.student;

<div class="d-flex align-items-baseline justify-content-between">

  <!-- Title -->
  <h1 class="h2">
    <ng-container i18n="@@workspace-enrollment-update-title">New enrollment</ng-container>
  </h1>

  <!-- Breadcrumb -->
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item">
        <a [routerLink]="[ '/' ]" i18n="@@workspace-nav-link-home">Home</a>
      </li>
      <li class="breadcrumb-item">
        <a [routerLink]="[ '/workspace/enrollments' ]" i18n="@@workspace-nav-link-enrollments">Enrollments</a>
      </li>
      <li class="breadcrumb-item active" aria-current="page">
        <ng-container i18n="@@workspace-nav-link-enrollments-new">New</ng-container>
      </li>
    </ol>
  </nav>
</div>

<div class="row">
  <div class="col-lg-9">
    <div class="card">
      <div class="card-header">
        <div class="card-header-title h5">
          <ng-container i18n="@@workspace-enrollment-update-card-header-title">Enrollment</ng-container>
        </div>
      </div>
      <div class="card-body">
        <div [formGroup]="form" class="form-section mb-8">
          <div class="border-bottom border-primary text-primary fs-5 fw-bold py-1 mb-4">
            <ng-container i18n="@@workspace-enrollment-enrollment-update">Enrollment</ng-container>
          </div>
          <div class="row">
            <div class="col-lg-4">
              <app-sui-form-group #service [name]="'service'" class="d-block mb-4">
                <label [class.is-invalid]="service.invalid" [class.is-required]="service.required"
                  [for]="service.id" class="form-label">
                  <ng-container i18n="@@workspace-enrollment-update-service">Service</ng-container>
                </label>
                <select [class.is-invalid]="service.invalid" [class.is-required]="service.required"
                  [formControl]="service.formControl" [id]="service.id" class="form-select">
                  <option disabled></option>
                  @for (service of services; track $index) {
                    <option [value]="service.id">{{ service.name }}</option>
                  }
                </select>
              </app-sui-form-group>
            </div>
            <div class="col-lg-4">
              <app-sui-form-group #facility [name]="'facility'" class="d-block mb-4">
                <label [class.is-invalid]="facility.invalid" [class.is-required]="facility.required"
                  [for]="facility.id" class="form-label">
                  <ng-container i18n="@@workspace-enrollment-update-facility">Facility</ng-container>
                </label>
                <select [class.is-invalid]="facility.invalid" [class.is-required]="facility.required"
                  [formControl]="facility.formControl" [id]="facility.id" class="form-select">
                  <option disabled></option>
                  @for (facility of facilities; track facility.id) {
                    <option [value]="facility.id">{{ facility.name }}</option>
                  }
                </select>
              </app-sui-form-group>
            </div>
            <div class="col-lg-4">
              <app-sui-form-group #start [name]="'start'" class="d-block mb-4">
                <label [class.is-invalid]="start.invalid" [class.is-required]="start.required"
                  [for]="start.id" class="form-label">
                  <ng-container i18n="@@workspace-enrollment-update-start">Starts on</ng-container>
                </label>
                <input [class.is-invalid]="start.invalid" [class.is-required]="start.required"
                  [formControl]="start.formControl" [id]="start.id" class="form-control"
                  placeholder="" i18n-placeholder="@@workspace-enrollment-update-start-placeholder" type="text" />
              </app-sui-form-group>
            </div>
          </div>
          <app-sui-form-group #plan [name]="'plan'" class="d-block mb-4">
            <label [class.is-invalid]="plan.invalid" [class.is-required]="plan.required"
              [for]="plan.id" class="form-label">
              <ng-container i18n="@@workspace-enrollment-update-plan">Plan</ng-container>
            </label>
            <select [class.is-invalid]="plan.invalid" [class.is-required]="plan.required"
              [formControl]="plan.formControl" [id]="plan.id" class="form-select">
              <option disabled></option>
              @for (plan of getServicePlans(); track $index) {
                <option [value]="plan.code">{{ plan.name }}</option>
              }
            </select>
          </app-sui-form-group>
        </div>
        <!-- Student -->
        <div class="form-section mb-8">
          <div class="border-bottom border-primary text-primary fs-5 fw-bold py-1 mb-4">
            <ng-container i18n="@@workspace-enrollment-update-student">Student</ng-container>
          </div>
          @if (form.controls.student) {
            <ng-container [formGroup]="form.controls.student">
              <div class="row">
                <div class="col-lg-8">
                  <app-sui-form-group #name [name]="'name'" class="d-block mb-4">
                    <label [class.is-invalid]="name.invalid" [class.is-required]="name.required"
                      [for]="name.id" class="form-label">
                      <ng-container i18n="@@workspace-enrollment-update-name">Name</ng-container>
                    </label>
                    <input [class.is-invalid]="name.invalid" [class.is-required]="name.required"
                      [formControl]="name.formControl" [id]="name.id" class="form-control"
                      placeholder="" i18n-placeholder="@@workspace-enrollment-update-name-placeholder" type="text" />
                  </app-sui-form-group>
                </div>
                <div class="col-lg-4">
                  <app-sui-form-group #birth [name]="'birth'" class="d-block mb-4">
                    <label [class.is-invalid]="birth.invalid" [class.is-required]="birth.required"
                      [for]="birth.id" class="form-label">
                      <ng-container i18n="@@workspace-enrollment-update-birth">Birthday</ng-container>
                    </label>
                    <input [class.is-invalid]="birth.invalid" [class.is-required]="birth.required"
                      [formControl]="birth.formControl" [id]="birth.id" class="form-control"
                      placeholder="" i18n-placeholder="@@workspace-enrollment-update-birth-placeholder" type="text" />
                  </app-sui-form-group>
                </div>
              </div>
              <div class="row">
                <div class="col-lg-4">
                  <app-sui-form-group #nationality [name]="'nationality'" class="d-block mb-4">
                    <label [class.is-invalid]="nationality.invalid" [class.is-required]="nationality.required"
                      [for]="nationality.id" class="form-label">
                      <ng-container i18n="@@workspace-enrollment-update-nationality">Nationality</ng-container>
                    </label>
                    <select [class.is-invalid]="nationality.invalid" [class.is-required]="nationality.required"
                      [formControl]="nationality.formControl" [id]="nationality.id" class="form-select">
                      <option disabled></option>
                      @for (nationality of nationalities; track nationality.code) {
                        <option [value]="nationality.code">{{ nationality.name }}</option>
                      }
                    </select>
                  </app-sui-form-group>
                </div>
                <div class="col-lg-4">
                  @if (form.controls.student.controls.birthplace) {
                    <app-sui-form-group #birthplace [name]="'birthplace'" class="d-block mb-4">
                      <label [class.is-invalid]="birthplace.invalid" [class.is-required]="birthplace.required"
                        [for]="birthplace.id" class="form-label">
                        <ng-container i18n="@@workspace-enrollment-update-birthplace">Birthplace</ng-container>
                      </label>
                      <select [class.is-invalid]="birthplace.invalid" [class.is-required]="birthplace.required"
                        [formControl]="birthplace.formControl" [id]="birthplace.id" class="form-select">
                        <option disabled></option>
                        @for (district of districts.get(form.controls.student.controls.nationality.value!); track district.code) {
                          <option [value]="district.code">{{ district.name }}</option>
                        }
                      </select>
                    </app-sui-form-group>
                  }
                </div>
              </div>
              <div class="row">
                <div class="col-lg-4">
                  <app-sui-form-group #county [name]="'county'" class="d-block mb-4">
                    <label [class.is-invalid]="county.invalid" [class.is-required]="county.required"
                      [for]="county.id" class="form-label">
                      <ng-container i18n="@@workspace-enrollment-update-county">County</ng-container>
                    </label>
                    <input [class.is-invalid]="county.invalid" [class.is-required]="county.required"
                      [formControl]="county.formControl" [id]="county.id" class="form-control"
                      placeholder="" i18n-placeholder="@@workspace-enrollment-update-county-placeholder" type="text" />
                  </app-sui-form-group>
                </div>
                <div class="col-lg-8">
                  <app-sui-form-group #streetAddress [name]="'streetAddress'" class="d-block mb-4">
                    <label [class.is-invalid]="streetAddress.invalid" [class.is-required]="streetAddress.required"
                      [for]="streetAddress.id" class="form-label">
                      <ng-container i18n="@@workspace-enrollment-update-postal-address">Street address</ng-container>
                    </label>
                    <input [class.is-invalid]="streetAddress.invalid" [class.is-required]="streetAddress.required"
                      [formControl]="streetAddress.formControl" [id]="streetAddress.id" class="form-control"
                      placeholder="" i18n-placeholder="@@workspace-enrollment-update-postal-address-placeholder" type="text" />
                  </app-sui-form-group>
                </div>
              </div>
              <div class="row">
                <div class="col-lg-4">
                  <app-sui-form-group #citizenNumber [name]="'citizenNumber'" class="d-block mb-4">
                    <label [class.is-invalid]="citizenNumber.invalid" [class.is-required]="citizenNumber.required"
                      [for]="citizenNumber.id" class="form-label">
                      <ng-container i18n="@@workspace-enrollment-update-citizen-number">Citizen Number</ng-container>
                    </label>
                    <input [class.is-invalid]="citizenNumber.invalid" [class.is-required]="citizenNumber.required"
                      [formControl]="citizenNumber.formControl" [id]="citizenNumber.id" class="form-control"
                      placeholder="" i18n-placeholder="@@workspace-enrollment-update-citizen-number-placeholder" type="text" />
                  </app-sui-form-group>
                </div>
                <div class="col-lg-4">
                  <app-sui-form-group #socialSecurityNumber [name]="'socialSecurityNumber'" class="d-block mb-4">
                    <label [class.is-invalid]="socialSecurityNumber.invalid" [class.is-required]="socialSecurityNumber.required"
                      [for]="socialSecurityNumber.id" class="form-label">
                      <ng-container i18n="@@workspace-enrollment-update-social-security-number">Social Security Number</ng-container>
                    </label>
                    <input [class.is-invalid]="socialSecurityNumber.invalid" [class.is-required]="socialSecurityNumber.required"
                      [formControl]="socialSecurityNumber.formControl" [id]="socialSecurityNumber.id" class="form-control"
                      placeholder="" i18n-placeholder="@@workspace-enrollment-update-social-security-number-placeholder" type="text" />
                  </app-sui-form-group>
                </div>
                <div class="col-lg-4">
                  <app-sui-form-group #taxNumber [name]="'taxNumber'" class="d-block mb-4">
                    <label [class.is-invalid]="taxNumber.invalid" [class.is-required]="taxNumber.required"
                      [for]="taxNumber.id" class="form-label">
                      <ng-container i18n="@@workspace-enrollment-update-tax-number-number">Tax Number</ng-container>
                    </label>
                    <input [class.is-invalid]="taxNumber.invalid" [class.is-required]="taxNumber.required"
                      [formControl]="taxNumber.formControl" [id]="taxNumber.id" class="form-control"
                      placeholder="" i18n-placeholder="@@workspace-enrollment-update-tax-number-number-placeholder" type="text" />
                  </app-sui-form-group>
                </div>
              </div>
            </ng-container>
          }
          @else {
            <div class="d-grid">
              <button (click)="addStudentControls()" class="btn btn-light" type="button">
                <ng-container i18n="workspace-enrollment-update-add-student">Add student details</ng-container>
              </button>
            </div>
          }
        </div>
        <!-- Parents -->
        <div class="form-section mb-8">
          <div class="border-bottom border-primary text-primary fs-5 fw-bold py-1 mb-4">
            <ng-container i18n="@@workspace-enrollment-update-student-parent-affiliation">Student parent affiliation</ng-container>
          </div>
          @if (form.controls.parents) {
            @for (parent of form.controls.parents.controls.parents.controls; track $index) {
              <ng-container [formGroup]="parent">
                <div class="border-bottom border-primary text-primary fs-6 py-1 mb-4">
                  <ng-container i18n="@@workspace-enrollment-update-student-parent">Parent</ng-container>
                </div>
                <div class="row">
                  <div class="col-lg-8">
                    <app-sui-form-group #name [name]="'name'" class="d-block mb-4">
                      <label [class.is-invalid]="name.invalid" [class.is-required]="name.required"
                        [for]="name.id" class="form-label">
                        <ng-container i18n="@@workspace-enrollment-update-name">Name</ng-container>
                      </label>
                      <input [class.is-invalid]="name.invalid" [class.is-required]="name.required"
                        [formControl]="name.formControl" [id]="name.id" class="form-control"
                        placeholder="" i18n-placeholder="@@workspace-enrollment-update-name-placeholder" type="text" />
                    </app-sui-form-group>
                  </div>
                  <div class="col-lg-4">
                    <app-sui-form-group #birth [name]="'birth'" class="d-block mb-4">
                      <label [class.is-invalid]="birth.invalid" [class.is-required]="birth.required"
                        [for]="birth.id" class="form-label">
                        <ng-container i18n="@@workspace-enrollment-update-birth">Birthday</ng-container>
                      </label>
                      <input [class.is-invalid]="birth.invalid" [class.is-required]="birth.required"
                        [formControl]="birth.formControl" [id]="birth.id" class="form-control"
                        placeholder="" i18n-placeholder="@@workspace-enrollment-update-birth-placeholder" type="text" />
                    </app-sui-form-group>
                  </div>
                </div>
                <div class="row">
                  <div class="col-lg-4">
                    <app-sui-form-group #nationality [name]="'nationality'" class="d-block mb-4">
                      <label [class.is-invalid]="nationality.invalid" [class.is-required]="nationality.required"
                        [for]="nationality.id" class="form-label">
                        <ng-container i18n="@@workspace-enrollment-update-nationality">Nationality</ng-container>
                      </label>
                      <select [class.is-invalid]="nationality.invalid" [class.is-required]="nationality.required"
                        [formControl]="nationality.formControl" [id]="nationality.id" class="form-select">
                        <option disabled></option>
                        @for (nationality of nationalities; track nationality.code) {
                          <option [value]="nationality.code">{{ nationality.name }}</option>
                        }
                      </select>
                    </app-sui-form-group>
                  </div>
                  <div class="col-lg-4">
                    @if (parent.controls.birthplace) {
                      <app-sui-form-group #birthplace [name]="'birthplace'" class="d-block mb-4">
                        <label [class.is-invalid]="birthplace.invalid" [class.is-required]="birthplace.required"
                          [for]="birthplace.id" class="form-label">
                          <ng-container i18n="@@workspace-enrollment-update-birthplace">Birthplace</ng-container>
                        </label>
                        <select [class.is-invalid]="birthplace.invalid" [class.is-required]="birthplace.required"
                          [formControl]="birthplace.formControl" [id]="birthplace.id" class="form-select">
                          <option disabled></option>
                          @for (district of districts.get(parent.controls.nationality.value!); track district.code) {
                            <option [value]="district.code">{{ district.name }}</option>
                          }
                        </select>
                      </app-sui-form-group>
                    }
                  </div>
                  <div class="col-lg-4">
                    <app-sui-form-group #education [name]="'education'" class="d-block mb-4">
                      <label [class.is-invalid]="education.invalid" [class.is-required]="education.required"
                        [for]="education.id" class="form-label">
                        <ng-container i18n="@@workspace-enrollment-update-education">Education</ng-container>
                      </label>
                      <input [class.is-invalid]="education.invalid" [class.is-required]="education.required"
                        [formControl]="education.formControl" [id]="education.id" class="form-control"
                        placeholder="" i18n-placeholder="@@workspace-enrollment-update-education-placeholder" type="text" />
                    </app-sui-form-group>
                  </div>
                </div>
                @if (parent.controls.employment) {
                  <ng-container [formGroup]="parent.controls.employment">
                    <div class="border-bottom border-primary text-primary text-italic fs-6 py-1 mb-4">
                      <ng-container i18n="@@workspace-enrollment-update-student-parent-employment">Parent / Employment</ng-container>
                    </div>
                    <div class="row">
                      <div class="col-lg-4">
                        <app-sui-form-group #county [name]="'county'" class="d-block mb-4">
                          <label [class.is-invalid]="county.invalid" [class.is-required]="county.required"
                            [for]="county.id" class="form-label">
                            <ng-container i18n="@@workspace-enrollment-update-county">County</ng-container>
                          </label>
                          <input [class.is-invalid]="county.invalid" [class.is-required]="county.required"
                            [formControl]="county.formControl" [id]="county.id" class="form-control"
                            placeholder="" i18n-placeholder="@@workspace-enrollment-update-county-placeholder" type="text" />
                        </app-sui-form-group>
                      </div>
                      <div class="col-lg-8">
                        <app-sui-form-group #business [name]="'business'" class="d-block mb-4">
                          <label [class.is-invalid]="business.invalid" [class.is-required]="business.required"
                            [for]="business.id" class="form-label">
                            <ng-container i18n="@@workspace-enrollment-update-employee">Business</ng-container>
                          </label>
                          <input [class.is-invalid]="business.invalid" [class.is-required]="business.required"
                            [formControl]="business.formControl" [id]="business.id" class="form-control"
                            placeholder="" i18n-placeholder="@@workspace-enrollment-update-employee-placeholder" type="text" />
                        </app-sui-form-group>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-lg-4">
                        <app-sui-form-group #start [name]="'start'" class="d-block mb-4">
                          <label [class.is-invalid]="start.invalid" [class.is-required]="start.required"
                            [for]="start.id" class="form-label">
                            <ng-container i18n="@@workspace-enrollment-update-start-time">Starts at</ng-container>
                          </label>
                          <input [class.is-invalid]="start.invalid" [class.is-required]="start.required"
                            [formControl]="start.formControl" [id]="start.id" class="form-control"
                            placeholder="" i18n-placeholder="@@workspace-enrollment-update-start-time-placeholder" type="text" />
                        </app-sui-form-group>
                      </div>
                      <div class="col-lg-4">
                        <app-sui-form-group #lunch [name]="'lunch'" class="d-block mb-4">
                          <label [class.is-invalid]="lunch.invalid" [class.is-required]="lunch.required"
                            [for]="lunch.id" class="form-label">
                            <ng-container i18n="@@workspace-enrollment-update-lunch-time">Lunches at</ng-container>
                          </label>
                          <input [class.is-invalid]="lunch.invalid" [class.is-required]="lunch.required"
                            [formControl]="lunch.formControl" [id]="lunch.id" class="form-control"
                            placeholder="" i18n-placeholder="@@workspace-enrollment-update-lunch-time-placeholder" type="text" />
                        </app-sui-form-group>
                      </div>
                      <div class="col-lg-4">
                        <app-sui-form-group #finish [name]="'finish'" class="d-block mb-4">
                          <label [class.is-invalid]="finish.invalid" [class.is-required]="finish.required"
                            [for]="finish.id" class="form-label">
                            <ng-container i18n="@@workspace-enrollment-update-finish-time">Finishes at</ng-container>
                          </label>
                          <input [class.is-invalid]="finish.invalid" [class.is-required]="finish.required"
                            [formControl]="finish.formControl" [id]="finish.id" class="form-control"
                            placeholder="" i18n-placeholder="@@workspace-enrollment-update-finish-time-placeholder" type="text" />
                        </app-sui-form-group>
                      </div>
                    </div>
                  </ng-container>
                }
              </ng-container>
            }

            <div class="border-bottom border-primary text-primary fs-6 py-1 mb-4">
              <ng-container i18n="@@workspace-enrollment-update-parent-situation">Situation</ng-container>
            </div>
            <ng-container [formGroup]="form.controls.parents">
              <app-sui-form-group #guardian [name]="'guardian'" class="d-block mb-4">
                <label [class.is-invalid]="guardian.invalid" [class.is-required]="guardian.required"
                  [for]="guardian.id" class="form-label">
                  <ng-container i18n="@@workspace-enrollment-update-guardian">Legal guardian</ng-container>
                </label>
                <input [class.is-invalid]="guardian.invalid" [class.is-required]="guardian.required"
                  [formControl]="guardian.formControl" [id]="guardian.id" class="form-control"
                  placeholder="" i18n-placeholder="@@workspace-enrollment-update-guardian-placeholder" type="text" />
              </app-sui-form-group>
              <div class="row">
                <div class="col-lg-4">
                  <app-sui-form-group #housing [name]="'housing'" class="d-block mb-4">
                    <label [class.is-invalid]="housing.invalid" [class.is-required]="housing.required"
                      [for]="housing.id" class="form-label">
                      <ng-container i18n="@@workspace-enrollment-update-housing">Housing</ng-container>
                    </label>
                    <input [class.is-invalid]="housing.invalid" [class.is-required]="housing.required"
                      [formControl]="housing.formControl" [id]="housing.id" class="form-control"
                      placeholder="" i18n-placeholder="@@workspace-enrollment-update-housing-placeholder" type="text" />
                  </app-sui-form-group>
                </div>
                <div class="col-lg-4">
                  <app-sui-form-group #maritalStatus [name]="'maritalStatus'" class="d-block mb-4">
                    <label [class.is-invalid]="maritalStatus.invalid" [class.is-required]="maritalStatus.required"
                      [for]="maritalStatus.id" class="form-label">
                      <ng-container i18n="@@workspace-enrollment-update-marital-status">Marital status</ng-container>
                    </label>
                    <input [class.is-invalid]="maritalStatus.invalid" [class.is-required]="maritalStatus.required"
                      [formControl]="maritalStatus.formControl" [id]="maritalStatus.id" class="form-control"
                      placeholder="" i18n-placeholder="@@workspace-enrollment-update-marital-status-placeholder" type="text" />
                  </app-sui-form-group>
                </div>
              </div>
            </ng-container>
          }
        </div>
        <!-- Legal guardian -->
        <div class="form-section mb-8">
          <div class="border-bottom border-primary text-primary fs-5 fw-bold py-1 mb-4">
            <ng-container i18n="@@workspace-enrollment-update-guardian">Legal guardian</ng-container>
          </div>
          <ng-container [formGroup]="form.controls.guardian">
            <div class="border-bottom border-primary text-primary fs-6 py-1 mb-4">
              <ng-container i18n="@@workspace-enrollment-update-guardian">Parent</ng-container>
            </div>
            <div class="row">
              <div class="col-lg-8">
                <app-sui-form-group #name [name]="'name'" class="d-block mb-4">
                  <label [class.is-invalid]="name.invalid" [class.is-required]="name.required"
                    [for]="name.id" class="form-label">
                    <ng-container i18n="@@workspace-enrollment-update-name">Name</ng-container>
                  </label>
                  <input [class.is-invalid]="name.invalid" [class.is-required]="name.required"
                    [formControl]="name.formControl" [id]="name.id" class="form-control"
                    placeholder="" i18n-placeholder="@@workspace-enrollment-update-name-placeholder" type="text" />
                </app-sui-form-group>
              </div>
              <div class="col-lg-4">
                <app-sui-form-group #birth [name]="'birth'" class="d-block mb-4">
                  <label [class.is-invalid]="birth.invalid" [class.is-required]="birth.required"
                    [for]="birth.id" class="form-label">
                    <ng-container i18n="@@workspace-enrollment-update-birth">Birthday</ng-container>
                  </label>
                  <input [class.is-invalid]="birth.invalid" [class.is-required]="birth.required"
                    [formControl]="birth.formControl" [id]="birth.id" class="form-control"
                    placeholder="" i18n-placeholder="@@workspace-enrollment-update-birth-placeholder" type="text" />
                </app-sui-form-group>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-4">
                <app-sui-form-group #nationality [name]="'nationality'" class="d-block mb-4">
                  <label [class.is-invalid]="nationality.invalid" [class.is-required]="nationality.required"
                    [for]="nationality.id" class="form-label">
                    <ng-container i18n="@@workspace-enrollment-update-nationality">Nationality</ng-container>
                  </label>
                  <select [class.is-invalid]="nationality.invalid" [class.is-required]="nationality.required"
                    [formControl]="nationality.formControl" [id]="nationality.id" class="form-select">
                    <option disabled></option>
                    @for (nationality of nationalities; track nationality.code) {
                      <option [value]="nationality.code">{{ nationality.name }}</option>
                    }
                  </select>
                </app-sui-form-group>
              </div>
              <div class="col-lg-4">
                @if (form.controls.guardian.controls.birthplace) {
                  <app-sui-form-group #birthplace [name]="'birthplace'" class="d-block mb-4">
                    <label [class.is-invalid]="birthplace.invalid" [class.is-required]="birthplace.required"
                      [for]="birthplace.id" class="form-label">
                      <ng-container i18n="@@workspace-enrollment-update-birthplace">Birthplace</ng-container>
                    </label>
                    <select [class.is-invalid]="birthplace.invalid" [class.is-required]="birthplace.required"
                      [formControl]="birthplace.formControl" [id]="birthplace.id" class="form-select">
                      <option disabled></option>
                      @for (district of districts.get(form.controls.guardian.controls.nationality.value!); track district.code) {
                        <option [value]="district.code">{{ district.name }}</option>
                      }
                    </select>
                  </app-sui-form-group>
                }
              </div>
              <div class="col-lg-4">
                <app-sui-form-group #education [name]="'education'" class="d-block mb-4">
                  <label [class.is-invalid]="education.invalid" [class.is-required]="education.required"
                    [for]="education.id" class="form-label">
                    <ng-container i18n="@@workspace-enrollment-update-education">Education</ng-container>
                  </label>
                  <input [class.is-invalid]="education.invalid" [class.is-required]="education.required"
                    [formControl]="education.formControl" [id]="education.id" class="form-control"
                    placeholder="" i18n-placeholder="@@workspace-enrollment-update-education-placeholder" type="text" />
                </app-sui-form-group>
              </div>
            </div>
          </ng-container>
        </div>
        <!-- Family members -->
        <div class="form-section mb-8">
          <div class="border-bottom border-primary text-primary fs-5 fw-bold py-1 mb-4">
            <ng-container i18n="@@workspace-enrollment-update-family">Family members</ng-container>
          </div>
          @if (form.controls.familyMembers) {
            <div class="table-responsive mb-4">
              <table class="table table-bordered table-edge mb-0">
                <thead class="thead-dark">
                  <tr>
                    <th>Name</th>
                    <th>Kinship</th>
                    <th>Education</th>
                    <th>Birth</th>
                    <th>Ocupation</th>
                    <th>Employment Status</th>
                    <th>Comments</th>
                  </tr>
                </thead>
                <tbody>
                  @for (member of form.controls.familyMembers.controls.members.controls; track $index) {
                    <tr [formGroup]="member">
                      <td>
                        <div class="d-grid w-350px">
                          <app-sui-form-group #name [name]="'name'" class="d-block">
                            <input [class.is-invalid]="name.invalid" [class.is-required]="name.required"
                              [formControl]="name.formControl" [id]="name.id" class="form-control border-none"
                              placeholder="" i18n-placeholder="@@workspace-enrollment-update-name-placeholder" type="text" />
                          </app-sui-form-group>
                        </div>
                      </td>
                      <td>
                        <div class="d-grid w-200px">
                          <app-sui-form-group #kinship [name]="'kinship'" class="d-block">
                            <select [class.is-invalid]="kinship.invalid" [class.is-required]="kinship.required"
                              [formControl]="kinship.formControl" [id]="kinship.id" class="form-select border-none">
                              <option disabled></option>
                              @for (option of kinships; track option.id) {
                                <option [value]="option.id">{{ option.name }}</option>
                              }
                            </select>
                          </app-sui-form-group>
                        </div>
                      </td>
                      <td>
                        <div class="d-grid w-150px">
                          <app-sui-form-group #education [name]="'education'" class="d-block">
                            <input [class.is-invalid]="education.invalid" [class.is-required]="education.required"
                              [formControl]="education.formControl" [id]="education.id" class="form-control border-none"
                              placeholder="" i18n-placeholder="@@workspace-enrollment-update-education-placeholder" type="text" />
                          </app-sui-form-group>
                        </div>
                      </td>
                      <td>
                        <div class="d-grid w-150px">
                          <app-sui-form-group #birth [name]="'birth'" class="d-block">
                            <input [class.is-invalid]="birth.invalid" [class.is-required]="birth.required"
                              [formControl]="birth.formControl" [id]="birth.id" class="form-control border-none"
                              placeholder="" i18n-placeholder="@@workspace-enrollment-update-birth-placeholder" type="text" />
                          </app-sui-form-group>
                        </div>
                      </td>
                      <td>
                        <div class="d-grid w-150px">
                          <app-sui-form-group #occupation [name]="'occupation'" class="d-block">
                            <input [class.is-invalid]="occupation.invalid" [class.is-required]="occupation.required"
                              [formControl]="occupation.formControl" [id]="occupation.id" class="form-control border-none"
                              placeholder="" i18n-placeholder="@@workspace-enrollment-update-occupation-placeholder" type="text" />
                          </app-sui-form-group>
                        </div>
                      </td>
                      <td>
                        <div class="d-grid w-150px">
                          <app-sui-form-group #employmentStatus [name]="'employmentStatus'" class="d-block">
                            <input [class.is-invalid]="employmentStatus.invalid" [class.is-required]="employmentStatus.required"
                              [formControl]="employmentStatus.formControl" [id]="employmentStatus.id" class="form-control border-none"
                              placeholder="" i18n-placeholder="@@workspace-enrollment-update-employment-status-placeholder" type="text" />
                          </app-sui-form-group>
                        </div>
                      </td>
                      <td>
                        <div class="d-grid w-500px">
                          <app-sui-form-group #comment [name]="'comment'" class="d-block">
                            <input [class.is-invalid]="comment.invalid" [class.is-required]="comment.required"
                              [formControl]="comment.formControl" [id]="comment.id" class="form-control border-none"
                              placeholder="" i18n-placeholder="@@workspace-enrollment-update-comment-placeholder" type="text" />
                          </app-sui-form-group>
                        </div>
                      </td>
                    </tr>
                  }
                </tbody>
              </table>
            </div>
            <div class="d-flex align-items-center justify-content-end">
              <button (click)="addFamilyMemberControls()" class="btn btn-light">Add family member</button>
            </div>
          }
        </div>
        <!-- Services -->
        <div class="form-section mb-8">
          <div class="border-bottom border-primary text-primary fs-5 fw-bold py-1 mb-4">
            <ng-container i18n="@@workspace-enrollment-update-additional-services">Additional services</ng-container>
          </div>
            @if (form.controls.services) {
              <ng-container [formGroup]="form.controls.services">
              <!-- <app-sui-form-group #extra [name]="'extra'" class="d-block mb-4">
                <div class="row">
                  <div class="col-lg-6 d-flex align-items-center">
                    <label [class.is-invalid]="extra.invalid" [class.is-required]="extra.required"
                      [for]="extra.id" class="form-label">
                      <ng-container i18n="@@workspace-enrollment-update-extra-service">Extra</ng-container>
                    </label>
                  </div>
                  <div class="col-lg-6">
                    <input [class.is-invalid]="extra.invalid" [class.is-required]="extra.required"
                      [formControl]="extra.formControl" [id]="extra.id" class="form-control"
                      placeholder="" i18n-placeholder="@@workspace-enrollment-update-extra-service-placeholder" type="text" />
                  </div>
                </div>
              </app-sui-form-group>
              <app-sui-form-group #feeding [name]="'feeding'" class="d-block mb-4">
                <div class="row">
                  <div class="col-lg-6 d-flex align-items-center">
                    <label [class.is-invalid]="feeding.invalid" [class.is-required]="feeding.required"
                      [for]="feeding.id" class="form-label">
                      <ng-container i18n="@@workspace-enrollment-update-feeding-service">Feeding</ng-container>
                    </label>
                  </div>
                  <div class="col-lg-6">
                    <input [class.is-invalid]="feeding.invalid" [class.is-required]="feeding.required"
                      [formControl]="feeding.formControl" [id]="feeding.id" class="form-control"
                      placeholder="" i18n-placeholder="@@workspace-enrollment-update-feeding-service-placeholder" type="text" />
                  </div>
                </div>
              </app-sui-form-group>
              <div [formGroup]="form.controls.services.controls.extension" class="d-block mb-4">
                <div class="row">
                  <div class="col-lg-6 d-flex align-items-center">
                    <div class="form-label">
                      <ng-container i18n="@@workspace-enrollment-update-extension-service">Extra time</ng-container>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <app-sui-form-group #monday [name]="'monday'" class="d-block form-switch mb-4">
                      <input [formControl]="monday.formControl" [id]="monday.id" class="form-check-input me-4" type="checkbox" role="switch">
                      <label [for]="monday.id" class="form-check-label">Monday</label>
                    </app-sui-form-group>
                    <app-sui-form-group #tuesday [name]="'tuesday'" class="d-block form-switch mb-4">
                      <input [formControl]="tuesday.formControl" [id]="tuesday.id" class="form-check-input me-4" type="checkbox" role="switch">
                      <label [for]="monday.id" class="form-check-label">Tuesday</label>
                    </app-sui-form-group>
                    <app-sui-form-group #monday [name]="'monday'" class="d-block form-switch mb-4">
                      <input [formControl]="monday.formControl" [id]="monday.id" class="form-check-input me-4" type="checkbox" role="switch">
                      <label [for]="monday.id" class="form-check-label">Monday</label>
                    </app-sui-form-group>
                    <app-sui-form-group #monday [name]="'monday'" class="d-block form-switch mb-4">
                      <input [formControl]="monday.formControl" [id]="monday.id" class="form-check-input me-4" type="checkbox" role="switch">
                      <label [for]="monday.id" class="form-check-label">Monday</label>
                    </app-sui-form-group>
                    <app-sui-form-group #monday [name]="'monday'" class="d-block form-switch mb-4">
                      <input [formControl]="monday.formControl" [id]="monday.id" class="form-check-input me-4" type="checkbox" role="switch">
                      <label [for]="monday.id" class="form-check-label">Monday</label>
                    </app-sui-form-group>
                  </div>
                </div>
              </div> -->
            </ng-container>
          }
        </div>
      </div>
      <div class="card-footer d-flex align-items-center justify-content-end">
        <button class="btn btn-light" type="button" i18n="@@workspace-enrollment-go-back-to-search">Go back to search</button>
        <button class="btn btn-primary ms-4" type="submit" i18n="@@workspace-enrollment-update-submit">Submit</button>
      </div>
    </div>
  </div>
  <div class="col-lg-3">

  </div>
</div>

